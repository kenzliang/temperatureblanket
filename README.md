## README.md

## Notes
ü§ñ This code was thoughtfully generated by an AI assistant to provide clarity and structure. (aka vibe coded)
### Overview
- Default **yesterday** (ET) for display and scheduled ingestion
- **Rain** if precipitation_sum > **0.05 inches** and **snowfall == 0**; **Snow** if snowfall_cm > 0
- **Full-year history** via backfill job
- **Secured** with Supabase Auth + RLS

### Local Dev
1. Copy `.env.example` ‚Üí `.env.local` with Supabase vars
2. `npm i && npm run dev`
3. Start a local tunnel for serverless if needed (Vercel CLI) or mock endpoints

### Deployment
- Push to Vercel; add Cron for `/api/jobs/fetch-yesterday` at 10:00 UTC (‚âà06:00 ET)
- Trigger `/api/jobs/backfill` once for YTD

### Notes
- The UI derives roster from `GET /api/checks?date=...` response order.
- You can swap to direct Supabase client reads if you prefer; endpoints are provided to centralize auth/logic.
- For Basic Auth instead of Supabase Auth, wrap endpoints with a shared secret check (not included here by default).

---

## Optional: Edge Middleware for Basic Lock (if you choose Basic Auth)
*(Not enabled by default; uncomment and configure in Vercel if desired.)*

Create `middleware.ts` at repo root:
```ts
import { NextResponse } from 'next/server'; // if using Next; for Vite SSR you‚Äôd adapt using platform middleware

export function middleware(req: Request) {
  const auth = req.headers.get('authorization') || '';
  const [scheme, b64] = auth.split(' ');
  if (scheme !== 'Basic') return new Response('Auth required', { status: 401, headers: { 'WWW-Authenticate': 'Basic realm="app"' } });
  const [user, pass] = atob(b64).split(':');
  if (user !== process.env.BASIC_USER || pass !== process.env.BASIC_PASS) return new Response('Forbidden', { status: 403 });
  return NextResponse.next();
}
```
Add env vars `BASIC_USER`, `BASIC_PASS` in Vercel.

---

## That‚Äôs it
This starter compiles, deploys, fetches data daily, and lets you tick ‚ÄúCompleted‚Äù per person per day with full-year history. If you want me to tailor the styling, add CSV export, or switch to Netlify/Cloudflare Workers, say the word.
